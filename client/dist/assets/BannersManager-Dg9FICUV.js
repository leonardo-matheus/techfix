import{U as c,l as P,r as n,j as e,B as l,S as z,X as C,m as F,k as H}from"./index-CFDJ8TsI.js";import{I as v}from"./input-DJ7UkUW4.js";import{L as d}from"./label-4YzDkjpp.js";import{P as S,i as b,h as O,S as $,d as q,e as R,f as U,g as x}from"./select-CxVwQHAx.js";import{B as k}from"./badge-DAKKBqqt.js";import{T as V,D as G,a as M,b as X,c as _,d as J,e as K}from"./dialog-BpGk_Yw0.js";import{C as p,c as f,a as Q,b as W}from"./card-CahytKwd.js";import"./index-BE5qs3-1.js";import"./chevron-down-BYJLiQyg.js";const m={async getActiveBanners(s){const{data:t}=await c.get("/banners/active",{params:{position:s}});return t},async getBanners(s){const{data:t}=await c.get("/banners",{params:s});return t},async getBanner(s){const{data:t}=await c.get(`/banners/${s}`);return t},async createBanner(s){const{data:t}=await c.post("/banners",s);return t},async updateBanner(s,t){const{data:h}=await c.put(`/banners/${s}`,t);return h},async deleteBanner(s){await c.delete(`/banners/${s}`)},async reorderBanners(s){await c.post("/banners/reorder",{banners:s})}};function ce(){const{toast:s}=P(),[t,h]=n.useState([]),[D,N]=n.useState(!0),[E,u]=n.useState(!1),[j,y]=n.useState(null),[B,w]=n.useState(!1),[i,r]=n.useState({title:"",image:"",link:"",position:"hero",active:!0}),o=n.useCallback(async()=>{N(!0);try{const a=await m.getBanners();h(a)}catch{s({title:"Erro",description:"Não foi possível carregar os banners.",variant:"destructive"})}finally{N(!1)}},[s]);n.useEffect(()=>{o()},[o]);const g=a=>{a?(y(a),r({title:a.title,image:a.image,link:a.link||"",position:a.position,active:a.active})):(y(null),r({title:"",image:"",link:"",position:"hero",active:!0})),u(!0)},I=async a=>{a.preventDefault(),w(!0);try{j?(await m.updateBanner(j.id,i),s({title:"Banner atualizado",variant:"success"})):(await m.createBanner({...i,order:t.length}),s({title:"Banner criado",variant:"success"})),u(!1),o()}catch{s({title:"Erro ao salvar",variant:"destructive"})}finally{w(!1)}},T=async a=>{if(confirm("Excluir este banner?"))try{await m.deleteBanner(a),s({title:"Banner excluído",variant:"success"}),o()}catch{s({title:"Erro ao excluir",variant:"destructive"})}},A=async a=>{try{await m.updateBanner(a.id,{active:!a.active}),o()}catch{s({title:"Erro ao atualizar",variant:"destructive"})}};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Banners"}),e.jsx("p",{className:"text-muted-foreground",children:"Gerencie seus banners promocionais"})]}),e.jsxs(l,{onClick:()=>g(),children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),"Novo Banner"]})]}),D?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[...Array(4)].map((a,L)=>e.jsx(p,{children:e.jsx(f,{className:"p-4",children:e.jsx(z,{className:"h-32 w-full"})})},L))}):t.length===0?e.jsx(p,{className:"py-12",children:e.jsxs(f,{className:"text-center",children:[e.jsx(C,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Nenhum banner cadastrado"}),e.jsxs(l,{onClick:()=>g(),children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),"Criar primeiro banner"]})]})}):e.jsx(F.div,{className:"grid grid-cols-1 md:grid-cols-2 gap-6",initial:{opacity:0},animate:{opacity:1},children:t.map(a=>e.jsxs(p,{children:[e.jsx(Q,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(W,{className:"text-lg",children:a.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{checked:a.active,onCheckedChange:()=>A(a)}),e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>g(a),children:e.jsx(O,{className:"h-4 w-4"})}),e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>T(a.id),children:e.jsx(V,{className:"h-4 w-4 text-destructive"})})]})]})}),e.jsxs(f,{children:[e.jsx("div",{className:"aspect-video rounded-lg bg-muted overflow-hidden mb-3",children:a.image?e.jsx("img",{src:a.image,alt:a.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(C,{className:"h-8 w-8 text-muted-foreground"})})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(k,{variant:"outline",children:a.position}),e.jsx(k,{variant:a.active?"success":"secondary",children:a.active?"Ativo":"Inativo"})]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:H(a.createdAt)})]})]})]},a.id))}),e.jsx(G,{open:E,onOpenChange:u,children:e.jsxs(M,{children:[e.jsxs(X,{children:[e.jsx(_,{children:j?"Editar Banner":"Novo Banner"}),e.jsx(J,{children:"Configure as informações do banner"})]}),e.jsxs("form",{onSubmit:I,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Título"}),e.jsx(v,{value:i.title,onChange:a=>r({...i,title:a.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"URL da Imagem"}),e.jsx(v,{value:i.image,onChange:a=>r({...i,image:a.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Link (opcional)"}),e.jsx(v,{value:i.link,onChange:a=>r({...i,link:a.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Posição"}),e.jsxs($,{value:i.position,onValueChange:a=>r({...i,position:a}),children:[e.jsx(q,{children:e.jsx(R,{})}),e.jsxs(U,{children:[e.jsx(x,{value:"hero",children:"Hero"}),e.jsx(x,{value:"services",children:"Serviços"}),e.jsx(x,{value:"projects",children:"Projetos"}),e.jsx(x,{value:"footer",children:"Footer"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsx(d,{children:"Ativo"}),e.jsx(b,{checked:i.active,onCheckedChange:a=>r({...i,active:a})})]}),e.jsxs(K,{children:[e.jsx(l,{type:"button",variant:"outline",onClick:()=>u(!1),children:"Cancelar"}),e.jsx(l,{type:"submit",disabled:B,children:B?"Salvando...":"Salvar"})]})]})]})})]})}export{ce as default};
