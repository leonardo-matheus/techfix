import{c as v,l as E,r as M,j as s,B as O,S as i}from"./index-CFDJ8TsI.js";import{C as r,a as l,b as c,d as V,c as n}from"./card-CahytKwd.js";import{T as U,a as G,b as x}from"./tabs-BvUBSuTo.js";import{a as H,c as $,i as q,j as F,k as X,R as o,L as Y,C as h,X as j,Y as y,T as d,e as I,P as W,f as _,g as z,B as p,h as u,l as J}from"./useAnalytics-MROr_DDH.js";import{G as Q}from"./globe-D9OJ4Ifh.js";import"./index-BCIM_yRJ.js";import"./index-BE5qs3-1.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=v("Chrome",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=v("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=v("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),k=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6"];function os(){const{toast:g}=E(),[a,b]=M.useState("month"),{data:L,isLoading:C}=H(a),{stats:f,isLoading:N}=$(a),{stats:S,isLoading:D}=q(a),{stats:R,isLoading:T}=F(a),{stats:K,isLoading:B}=X(a),P=async e=>{try{const t=await J.exportAnalytics(a,e);if(e==="csv"){const A=t,w=window.URL.createObjectURL(A),m=document.createElement("a");m.href=w,m.download=`analytics-${a}.csv`,m.click(),window.URL.revokeObjectURL(w)}g({title:"Exportado com sucesso",variant:"success"})}catch{g({title:"Erro ao exportar",variant:"destructive"})}};return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Analytics"}),s.jsx("p",{className:"text-muted-foreground",children:"Dados detalhados de visitação"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(U,{value:a,onValueChange:e=>b(e),children:s.jsxs(G,{children:[s.jsx(x,{value:"today",children:"Hoje"}),s.jsx(x,{value:"week",children:"Semana"}),s.jsx(x,{value:"month",children:"Mês"}),s.jsx(x,{value:"year",children:"Ano"})]})}),s.jsxs(O,{variant:"outline",onClick:()=>P("csv"),children:[s.jsx(ss,{className:"mr-2 h-4 w-4"}),"CSV"]})]})]}),s.jsxs(r,{children:[s.jsxs(l,{children:[s.jsx(c,{children:"Visitas ao Longo do Tempo"}),s.jsx(V,{children:"Número de visitas por dia"})]}),s.jsx(n,{children:C?s.jsx(i,{className:"h-[350px] w-full"}):s.jsx(o,{width:"100%",height:350,children:s.jsxs(Y,{data:L,children:[s.jsx(h,{strokeDasharray:"3 3",className:"stroke-muted"}),s.jsx(j,{dataKey:"date",tickFormatter:e=>new Date(e).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})}),s.jsx(y,{}),s.jsx(d,{labelFormatter:e=>new Date(e).toLocaleDateString("pt-BR"),contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),s.jsx(I,{type:"monotone",dataKey:"visits",stroke:"hsl(var(--primary))",strokeWidth:2,dot:!1})]})})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(r,{children:[s.jsx(l,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(es,{className:"h-5 w-5"}),s.jsx(c,{children:"Dispositivos"})]})}),s.jsx(n,{children:N?s.jsx(i,{className:"h-[250px] w-full"}):s.jsx(o,{width:"100%",height:250,children:s.jsxs(W,{children:[s.jsx(_,{data:f,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,dataKey:"count",nameKey:"device",label:({device:e,percentage:t})=>`${e} ${t}%`,children:f.map((e,t)=>s.jsx(z,{fill:k[t%k.length]},t))}),s.jsx(d,{})]})})})]}),s.jsxs(r,{children:[s.jsx(l,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Z,{className:"h-5 w-5"}),s.jsx(c,{children:"Navegadores"})]})}),s.jsx(n,{children:D?s.jsx(i,{className:"h-[250px] w-full"}):s.jsx(o,{width:"100%",height:250,children:s.jsxs(p,{data:S,layout:"vertical",children:[s.jsx(h,{strokeDasharray:"3 3"}),s.jsx(j,{type:"number"}),s.jsx(y,{type:"category",dataKey:"browser",width:80}),s.jsx(d,{}),s.jsx(u,{dataKey:"count",fill:"hsl(var(--primary))",radius:4})]})})})]}),s.jsxs(r,{children:[s.jsx(l,{children:s.jsx(c,{children:"Páginas Mais Visitadas"})}),s.jsx(n,{children:T?s.jsx(i,{className:"h-[250px] w-full"}):s.jsx(o,{width:"100%",height:250,children:s.jsxs(p,{data:R,children:[s.jsx(h,{strokeDasharray:"3 3"}),s.jsx(j,{dataKey:"page"}),s.jsx(y,{}),s.jsx(d,{}),s.jsx(u,{dataKey:"visits",fill:"hsl(var(--primary))",radius:4})]})})})]}),s.jsxs(r,{children:[s.jsx(l,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Q,{className:"h-5 w-5"}),s.jsx(c,{children:"Países"})]})}),s.jsx(n,{children:B?s.jsx(i,{className:"h-[250px] w-full"}):s.jsx(o,{width:"100%",height:250,children:s.jsxs(p,{data:K,layout:"vertical",children:[s.jsx(h,{strokeDasharray:"3 3"}),s.jsx(j,{type:"number"}),s.jsx(y,{type:"category",dataKey:"country",width:100}),s.jsx(d,{}),s.jsx(u,{dataKey:"visits",fill:"hsl(var(--primary))",radius:4})]})})})]})]})]})}export{os as default};
