import{c as E,l as M,r,j as e,S,M as c,m as w,x,B as h,P as $}from"./index-Ba2dzVqo.js";import{B as A}from"./badge-D1DgCPRz.js";import{T as C,D as L,a as B,b as P,c as R,d as O}from"./dialog-D-1ieM5_.js";import{C as u,c as p}from"./card-DftRE4rc.js";import{T as F,a as H,b as j}from"./tabs-D17ij-mU.js";import{c as f}from"./contactsService-CSg2h5cP.js";import{C as I}from"./calendar-BZKkqmiO.js";import"./index-BLqTjA9R.js";import"./index-B34guZEZ.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=E("MailOpen",[["path",{d:"M21.2 8.4c.5.38.8.97.8 1.6v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V10a2 2 0 0 1 .8-1.6l8-6a2 2 0 0 1 2.4 0l8 6Z",key:"1jhwl8"}],["path",{d:"m22 10-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 10",key:"1qfld7"}]]);function W(){const{toast:i}=M(),[o,m]=r.useState([]),[b,N]=r.useState(!0),[n,T]=r.useState("all"),[a,d]=r.useState(null),g=r.useCallback(async()=>{N(!0);try{const s=n==="unread"?!1:n==="read"?!0:void 0,t=await f.getContacts(s);m(t)}catch{i({title:"Erro ao carregar contatos",variant:"destructive"})}finally{N(!1)}},[n,i]);r.useEffect(()=>{g()},[g]);const k=async s=>{try{await f.markAsRead(s.id),m(t=>t.map(l=>l.id===s.id?{...l,read:!0}:l)),(a==null?void 0:a.id)===s.id&&d({...s,read:!0})}catch{i({title:"Erro ao marcar como lido",variant:"destructive"})}},v=async s=>{if(confirm("Excluir este contato?"))try{await f.deleteContact(s),m(t=>t.filter(l=>l.id!==s)),(a==null?void 0:a.id)===s&&d(null),i({title:"Contato excluído",variant:"success"})}catch{i({title:"Erro ao excluir",variant:"destructive"})}},D=async s=>{d(s),s.read||await k(s)},y=o.filter(s=>!s.read).length;return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Contatos"}),e.jsx("p",{className:"text-muted-foreground",children:y>0?`${y} não lidos`:"Todos lidos"})]}),e.jsx(F,{value:n,onValueChange:s=>T(s),children:e.jsxs(H,{children:[e.jsx(j,{value:"all",children:"Todos"}),e.jsx(j,{value:"unread",children:"Não lidos"}),e.jsx(j,{value:"read",children:"Lidos"})]})})]}),b?e.jsx("div",{className:"space-y-4",children:[...Array(5)].map((s,t)=>e.jsx(u,{children:e.jsx(p,{className:"p-4",children:e.jsx(S,{className:"h-16 w-full"})})},t))}):o.length===0?e.jsx(u,{className:"py-12",children:e.jsxs(p,{className:"text-center",children:[e.jsx(c,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Nenhum contato encontrado"})]})}):e.jsx(w.div,{className:"space-y-3",initial:{opacity:0},animate:{opacity:1},children:o.map(s=>e.jsx(w.div,{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:e.jsx(u,{className:`cursor-pointer transition-colors hover:bg-muted/50 ${s.read?"":"border-primary/50 bg-primary/5"}`,onClick:()=>D(s),children:e.jsx(p,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${s.read?"bg-muted":"bg-primary/10 text-primary"}`,children:s.read?e.jsx(V,{className:"h-5 w-5"}):e.jsx(c,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:`font-medium truncate ${s.read?"":"font-semibold"}`,children:s.name}),!s.read&&e.jsx(A,{variant:"default",className:"text-xs",children:"Novo"})]}),e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:s.email}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1 mt-1",children:s.message})]})]}),e.jsxs("div",{className:"text-right shrink-0",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:x(s.createdAt)}),e.jsx(h,{variant:"ghost",size:"icon",className:"mt-2",onClick:t=>{t.stopPropagation(),v(s.id)},children:e.jsx(C,{className:"h-4 w-4 text-destructive"})})]})]})})})},s.id))}),e.jsx(L,{open:!!a,onOpenChange:s=>!s&&d(null),children:e.jsx(B,{className:"max-w-2xl",children:a&&e.jsxs(e.Fragment,{children:[e.jsxs(P,{children:[e.jsx(R,{children:a.name}),e.jsxs(O,{children:["Mensagem recebida em ",x(a.createdAt)]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(c,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("a",{href:`mailto:${a.email}`,className:"text-primary hover:underline",children:a.email})]}),a.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx($,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("a",{href:`tel:${a.phone}`,className:"text-primary hover:underline",children:a.phone})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(I,{className:"h-4 w-4"}),x(a.createdAt)]})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Mensagem:"}),e.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap",children:a.message})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(h,{variant:"outline",className:"flex-1",onClick:()=>window.location.href=`mailto:${a.email}`,children:[e.jsx(c,{className:"mr-2 h-4 w-4"}),"Responder por Email"]}),e.jsxs(h,{variant:"destructive",onClick:()=>v(a.id),children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),"Excluir"]})]})]})]})})})]})}export{W as default};
